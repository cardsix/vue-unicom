"use strict";function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var f,a=t[Symbol.iterator]();!(r=(f=a.next()).done)&&(n.push(f.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueUnicom=e()}(window,function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("[object array]"==u.call(e).toLowerCase())for(var o=0;o<e.length;o+=1)t(e[o],n,r,i);else if(e){var f=r?r(e):e;void 0===f&&(f=e),i[f]||(n.push(f),i[f]=!0)}return n}function e(e,n,r){var i=c.get(this)||{},o=i.group||[];r&&t(r).forEach(function(t){if(o.indexOf(t)<0){var n=h[t];n&&n.splice(n.indexOf(e),1)}}),t(n).forEach(function(t){var n=h[t];n||(n=h[t]=[]),n.indexOf(e)<0&&n.push(e)})}function n(t,e,n){e!=n&&(n&&p[n]==t&&delete p[n],e&&(p[e]=t))}function r(e,n){return function(r,i){if("#"==i){if(n[d]!=r)return}else if("@"==i){var o=c.get(n).group,f=n[l],a=f?t(f):[];if((!o||o.indexOf(r)<0)&&a.indexOf(r)<0)return}for(var u=arguments.length,s=Array(u>2?u-2:0),h=2;h<u;h++)s[h-2]=arguments[h];e.apply(n,s)}}function i(t,e,n,r,i){t&&(r.unshift(t,e,n,i),s.emit.apply(s,r))}function o(t){for(var e="",n="",r=!1,o=t.replace(/^([`~])/,function(t,e){return"~"==e&&(r=!0),""}).replace(/([@#])([^@#]*)$/,function(t,r,i){return e=i,n=r,""}),f=arguments.length,a=Array(f>1?f-1:0),u=1;u<f;u++)a[u-1]=arguments[u];if(r)return v.push([o,e,n,a,this]),this;switch(i(o,e,n,a,this),n){case"#":return p[e]||null;case"@":return h[e]||[]}}function f(a){var u,p,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=y.name,m=void 0===g?"unicom":g,_=y.idName,b=y.groupName;if(!f.installed){f.installed=!0,a.prototype["$"+m]=o,d=_||m+"Id",l=b||m+"Name",a.mixin({props:(u={},_defineProperty(u,d,{type:String,default:""}),_defineProperty(u,l,{type:[String,Array],default:""}),u),watch:(p={},_defineProperty(p,d,function(t,e){n(this,t,e)}),_defineProperty(p,l,{deep:!0,handler:function(t,n){e(this,t,n)}}),p),beforeCreate:function(){var e=this,n=this.$options,i=n[m],o={},f=!1,a=o.uni={};i&&i.length&&(f=!0,i.forEach(function(t){if(t)for(var n in t){a[n]||(a[n]=[]);var i=r(t[n],e);a[n].push(i),s.on(n,i)}}));var u=o.group=[];t(n[l],u,function(t){var n=String(t);h[n]||(h[n]=[]),h[n].push(e)}),u.length>0&&(f=!0),f&&c.set(this,o)},created:function(){var t=this[d];t&&n(this,t);var r=this[l];r&&e(this,r);for(var o=c.get(this)||{},f=0;f<v.length;f+=1){var a=v[f],u=_slicedToArray(a,4),s=u[0],h=u[1],p=u[2],y=u[3],g=!1;"#"==p?h==t&&(g=!0):"@"==p?o.group&&o.group.indexOf(h)>-1&&(g=!0):(""==s||Object.keys(o.uni||{}).indexOf(s)>-1)&&(g=!0),g&&(""==s?y[0](this):(v.splice(f,1),f-=1,i.apply(this,a)))}},destroyed:function(){var t=this,r=this.unicomId;r&&n(this,void 0,r);var i=this[l];i&&e(this,void 0,i);var o=c.get(this);if(o){c.delete(this);var f=o.uni;for(var a in f)!function(t){f[t].forEach(function(e){s.off(t,e)})}(a);o.group.forEach(function(e){var n=h[e];if(n){var r=n.indexOf(t);r>-1&&n.splice(r,1),0==n.length&&delete h[e]}});for(var u=0;u<v.length;){var p=v[u];""==p[0]&&p[4]==this?v.splice(u,1):u+=1}}}});var O=a.config.optionMergeStrategies;O[m]=O[l]=function(t,e){var n=[];return t&&n.push(t),e&&n.push(e),n}}}var a=(Array.prototype.slice,function(){function t(){_classCallCheck(this,t),this._monitor_=Object.assign({},this._monitor_||{})}return _createClass(t,[{key:"on",value:function(t,e){var n=this._monitor_||(this._monitor_={});return n[t]||(n[t]=[]),n[t].push(e),this}},{key:"off",value:function(t,e){var n=this._monitor_;if(n)if(e){var r=n[t];if(r){var i=r.indexOf(e);i>-1&&r.splice(i,1)}}else t?delete n[t]:delete this._monitor_;return this}},{key:"emit",value:function(t){var e=this._monitor_&&this._monitor_[t]||[],n=[];if(e.length){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var f=0;f<e.length;f+=1)n.push(e[f].apply(this,i))}return this}}]),t}()),u=Object.prototype.toString,s=new a,c=new Map,l="",h={},p={},d="",v=[];return{EventEmitter:a,install:f}});