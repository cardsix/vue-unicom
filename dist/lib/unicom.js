"use strict";function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){function t(t,e,n){e!=n&&(n&&delete p[n],e&&(p[e]=t))}function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("[object array]"==a.call(t).toLowerCase())for(var r=0;r<t.length;r+=1)e(t[r],n,i);else if(t){var o=String(t);n&&(l[o]||(l[o]=[]),l[o].push(n)),i.push(o)}return i}function n(t,e){return function(){var n=Array.prototype.slice.call(arguments),i=n.shift(),r=n.shift();i&&(r&&e[h]!=i||!r&&(!e[c]||e[c].indexOf(i)<0))||t.apply(e,n)}}function i(){var t=Array.prototype.slice.call(arguments),e="",n=!1,i=String(t[0]).replace(/([@#])([^@#]*)$/,function(t,i,r){return e=r,n="#"==i,""});t.splice(0,1,i,e,n,this),f.emit.apply(f,t)}function r(o){var y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=y.name,d=void 0===v?"unicom":v,m=y.sendName,_=y.groupName,g=y.idName;if(!r.installed){r.installed=!0,o.prototype["$"+(m||d+"Send")]=i,c=_||d+"Name",Object.defineProperty(o.prototype,"$"+(_||d+"VM"),{get:function(){return l}}),h=g||d+"Id",Object.defineProperty(o.prototype,"$"+h,{get:function(){return p}}),o.mixin({props:_defineProperty({},h,{type:String,default:""}),beforeCreate:function(){var i=this.$options,r=i[d];if(r){var o={};for(var l in r){o[l]=[],"[object array]"!=a.call(r[l]).toLowerCase()&&(r[l]=[r[l]]);for(var p=0;p<r[l].length;p+=1)if(r[l][p]){var h=n(r[l][p],this);o[l].push(h),f.on(l,h)}}u.push(o),s.push(this)}this[c]=e(i[c],this);var y=(this.$options.propsData||{}).unicomId;y&&t(this,y)},watch:{unicomId:function(e,n){t(this,e,n)}},destroyed:function(){var e=this,n=s.indexOf(this);if(n>=0){var i=u[n];s.splice(n,1),u.splice(n,1);for(var r in i)!function(t){i[t].forEach(function(e){f.off(t,e)})}(r)}this[c].forEach(function(t){var n=l[t];if(n){var i=n.indexOf(e);i>-1&&n.splice(i,1),0==n.length&&delete l[t]}});var o=this.unicomId;o&&t(this,void 0,o)}});var b=o.config.optionMergeStrategies;b[d]=b.watch,b[c]=function(t,e){var n=[];return t&&n.push(t),e&&n.push(e),n}}}var o=(Array.prototype.slice,function(){function t(){_classCallCheck(this,t),this._monitor_=Object.assign({},this._monitor_||{})}return _createClass(t,[{key:"on",value:function(t,e){var n=this._monitor_||(this._monitor_={});return n[t]||(n[t]=[]),n[t].push(e),this}},{key:"hasEvent",value:function(t){return(this._monitor_&&this._monitor_[t]||[]).length>0||!!this["on"+t]}},{key:"onec",value:function(t,e){function n(){e.apply(this,arguments),this.off(t,n)}return this.on(t,n),this}},{key:"off",value:function(t,e){var n=this._monitor_;if(n)if(e){var i=n[t];if(i){var r=i.indexOf(e);r>-1&&i.splice(r,1)}}else t?delete n[t]:delete this._monitor_;return this}},{key:"emit",value:function(t){for(var e=this._monitor_&&this._monitor_[t]||[],n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e.length)for(var o=0;o<e.length;o+=1)e[o].apply(this,i);var a=this["on"+t];return a&&a.apply(this,i),this}},{key:"assign",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return"string"==typeof e[0]?this.assign(_defineProperty({},e[0],e[1])):(e.unshift(this),Object.assign.apply(Object,e)),this}}]),t}()),a=Object.prototype.toString,f=new o,s=[],u=[],c="",l={},p={},h="";return window.Vue&&r(window.Vue),{EventEmitter:o,install:r}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi91bmljb20uanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmFjdG9yeSIsImV4cG9ydHMiLCJfdHlwZW9mIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidW5kZWZpbmVkIiwidXBkYXRlSWQiLCJ0b09uZUFycmF5IiwiZGF0YSIsIm92IiwibnYiLCJhcnIiLCJpZEZvclZtIiwia2V5IiwiU3RyaW5nIiwiZ3JvdXBGb3JWbSIsInB1c2giLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ0b1N0cmluZyIsImNhbGwiLCJ0b0xvd2VyQ2FzZSIsImkiLCJ0aGF0Iiwic2VuZFN3aXRjaCIsImZuIiwiYXJnIiwiQXJyYXkiLCJ0byIsInNoaWZ0IiwicHJvdG90eXBlIiwic2xpY2UiLCJyZXBsYWNlIiwiaXNJZCIsInMwIiwiczEiLCJ1bmljb21Hcm91cE5hbWUiLCJpbmRleE9mIiwic3BsaWNlIiwic2VuZCIsIm5hbWUiLCJzZW5kTmFtZSIsInMyIiwiZ3JvdXBOYW1lIiwiaWROYW1lIiwidGhpcyIsImluc3RhbGwiLCJpbnN0YWxsZWQiLCJfcmVmIiwiX3JlZiRuYW1lIiwiT2JqZWN0IiwiZ2V0IiwiZGVmaW5lUHJvcGVydHkiLCJ2dWUiLCJwcm9wcyIsInVuaWNvbUlkTmFtZSIsIiRvcHRpb25zIiwidXMiLCJ0eXBlIiwidW5pIiwiYmVmb3JlQ3JlYXRlIiwiZXZIb29rcyIsInZtSG9va3MiLCJuIiwiaWQiLCJ4Zm4iLCJ1bmljb20iLCJvbiIsImluZGV4Iiwib3B0IiwicHJvcHNEYXRhIiwidW5pY29tSWQiLCJ3YXRjaCIsImRlc3Ryb3llZCIsImdzIiwiZm9yRWFjaCIsIm1lcmdlIiwiY29uZmlnIiwib3B0aW9uTWVyZ2VTdHJhdGVnaWVzIiwiX3RoaXMiLCJwYXJlbnRWYWwiLCJWdWUiLCJjaGlsZFZhbCIsIngiLCJFdmVudEVtaXR0ZXIiLCJfY2xhc3NDYWxsQ2hlY2siLCJhc3NpZ24iLCJfbW9uaXRvcl8iLCJfY3JlYXRlQ2xhc3MiLCJ2YWx1ZSIsImZ1biIsIm1vbml0b3IiLCJmdW54IiwiYXBwbHkiLCJvZmYiLCJlcyIsIm9uRnVuIiwiX2xlbiIsImFnIiwiX2tleSIsImFyZ3MiLCJfZGVmaW5lUHJvcGVydHkiLCJ1bnNoaWZ0Iiwid2luZG93Il0sIm1hcHBpbmdzIjoic3RCQUFDLFNBQVVBLEVBQVFDLEdBQ0MsWUFBbkIsbUJBQU9DLFNBQVAsWUFBQUMsUUFBT0QsV0FBMEMsbUJBQVhFLFFBQXlCQSxPQUFPRixRQUFVRCxJQUM5RCxrQkFBWEksU0FBeUJBLE9BQU9DLElBQU1ELE9BQU9KLEdBQVdBLEtBRi9ETSxFQUdRLFdBOElULFFBQUFDLEdBQVNDLEVBQVdDLEVBQXBCQyxHQUF5Q0MsR0FBVEMsSUFFeEJGLFNBQ0lGLEdBQUFBLEdBRVBHLElBRUdFLEVBQUlDLEdBQU1DLElBS05DLFFBQUFBLEdBQUFBLEVBQUFBLEdBQUEsR0FBZ0JDLEdBQWhCQyxVQUFBQyxPQUFBLE9BQUFiLEtBQUFZLFVBQUEsR0FBQUEsVUFBQSxLQUNILElBQUEsa0JBQUFFLEVBQUFDLEtBQUFaLEdBQUFhLGNBQ0RWLElBQUFBLEdBQUlLLEdBQUosRUFBU0gsRUFBVEwsRUFBQVUsT0FBQUksR0FBQSxFQUNIZixFQUFBQyxFQUFBYyxHQUFBQyxFQUFBWixPQVRJLElBQUdILEVBQUssQ0FjakIsR0FBQUssR0FBU1csT0FBV0MsRUFDaEJGLEtBQ1FHLEVBQU1DLEtBQ05DLEVBQVNDLE9BWFRkLEVBQVdGLEdBQUtHLEtBQUtPLElBZ0JyQlosRUFBQUssS0FBQUgsR0FaUixNQUFPRixHQUlYLFFBQVNhLEdBQVdDLEVBQUlGLEdBZ0J4QixNQUFBLFlBQ0ksR0FBSUcsR0FBTUMsTUFBTUcsVUFBVUMsTUFBTVgsS0FBS0gsV0FkN0JXLEVBQUtGLEVBQUlHLFFBZ0JiRCxFQUFKRixFQUFBRyxPQUNJaEIsS0FBTUMsR0FBV1MsRUFBSVMsSUFBUUosSUFBbUJLLEtBQVNDLEVBQUlDLElBQU9aLEVBQUFhLEdBQUFDLFFBQUFULEdBQUEsS0FLeEVGLEVBQUFBLE1BQUlZLEVBQUpaLElBTUosUUFB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WEcsYUFBQUEsRUFBY3RDLFFBQUFBIiwiZmlsZSI6ImxpYi91bmljb20uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6IGZhY3RvcnkoKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG5cbmNvbnN0IHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuLy8g6Ieq5a6a5LmJ5LqL5Lu2IOexu+S8vCBub2RlanPkuK3nmoQgRXZlbnRFbWl0dGVyXG5jbGFzcyBFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIC8vIOWFi+mahuS4gOS7vSDkuovku7ZcbiAgICAgICAgdGhpcy5fbW9uaXRvcl8gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9tb25pdG9yXyB8fCB7fSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOe7keWumuS6i+S7tlxuICAgICAqIEBwYXJhbSB0eXBlIOS6i+S7tuWQjeensFxuICAgICAqIEBwYXJhbSBmdW4g5LqL5Lu25pa55rOVXG4gICAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcn1cbiAgICAgKi9cbiAgICBvbih0eXBlLCBmdW4pIHtcbiAgICAgICAgbGV0IG1vbml0b3IgPSB0aGlzLl9tb25pdG9yXyB8fCAodGhpcy5fbW9uaXRvcl8gPSB7fSk7XG4gICAgICAgIG1vbml0b3JbdHlwZV0gfHwgKG1vbml0b3JbdHlwZV0gPSBbXSk7XG4gICAgICAgIG1vbml0b3JbdHlwZV0ucHVzaChmdW4pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDliKTmlq3mmK/lkKbov5jmnInnibnlrprkuovku7ZcbiAgICAgKiBAcGFyYW0gdHlwZVxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGhhc0V2ZW50KHR5cGUpIHtcbiAgICAgICAgbGV0IG1vbml0b3IgPSB0aGlzLl9tb25pdG9yXyAmJiB0aGlzLl9tb25pdG9yX1t0eXBlXSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1vbml0b3IubGVuZ3RoID4gMCB8fCAhIXRoaXNbJ29uJyArIHR5cGVdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWPquacieaJp+ihjOS4gOasoeeahOS6i+S7tlxuICAgICAqIEBwYXJhbSB0eXBlIOS6i+S7tuWQjeensFxuICAgICAqIEBwYXJhbSBmdW4g5LqL5Lu25pa55rOVXG4gICAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcn1cbiAgICAgKi9cbiAgICBvbmVjKHR5cGUsIGZ1bikge1xuICAgICAgICBmdW5jdGlvbiBmdW54KCkge1xuICAgICAgICAgICAgZnVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLm9mZih0eXBlLCBmdW54KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uKHR5cGUsIGZ1bngpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDnp7vpmaTkuovku7ZcbiAgICAgKiBAcGFyYW0gdHlwZSDkuovku7blkI3np7BcbiAgICAgKiBAcGFyYW0gZnVuIOS6i+S7tuaWueazlVxuICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9XG4gICAgICovXG4gICAgb2ZmKHR5cGUsIGZ1bikge1xuICAgICAgICBsZXQgbW9uaXRvciA9IHRoaXMuX21vbml0b3JfO1xuICAgICAgICBpZiAobW9uaXRvcikge1xuICAgICAgICAgICAgaWYgKGZ1bikge1xuICAgICAgICAgICAgICAgIGxldCBlcyA9IG1vbml0b3JbdHlwZV07XG4gICAgICAgICAgICAgICAgaWYgKGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGVzLmluZGV4T2YoZnVuKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgbW9uaXRvclt0eXBlXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX21vbml0b3JfO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOinpuWPkeS6i+S7tlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIOS6i+S7tuWQjeensFxuICAgICAqIEBwYXJhbSB7Kn0gYWcg5Lyg6YCS55qE5Y+C5pWwXG4gICAgICovXG4gICAgZW1pdCh0eXBlLCAuLi5hZykge1xuICAgICAgICBsZXQgZXMgPSB0aGlzLl9tb25pdG9yXyAmJiB0aGlzLl9tb25pdG9yX1t0eXBlXSB8fCBbXTtcbiAgICAgICAgaWYgKGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGVzW2ldLmFwcGx5KHRoaXMsIGFnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgb25GdW4gPSB0aGlzWydvbicgKyB0eXBlXTtcbiAgICAgICAgb25GdW4gJiYgb25GdW4uYXBwbHkodGhpcywgYWcpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmianlsZXmnKzouqtcbiAgICAgKi9cbiAgICBhc3NpZ24oLi4uYXJncykge1xuICAgICAgICBpZih0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpe1xuICAgICAgICAgICAgdGhpcy5hc3NpZ24oe1thcmdzWzBdXTphcmdzWzFdfSlcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbi5hcHBseShPYmplY3QsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cblxuLyoqXG4gKiB1bmljb20g6IGU6YCaIOaDs+WIsOS4reWbveiBlOmAmuWwseaDs+WIsOS6hui/meS4quWQjeWtlyAtXy1cbiAqIOebrueahO+8jOaPkOS+m3Z1ZSDlhajlsYDnmoTovazlj5HmnLrliLZcbiAqIFsyMDE4LTAxLTE4XSDlop7liqDliIbnu4TvvIwg5Y+v5Lul55u05o6l6I635Y+W5YiG57uE55qEIHZtXG4gKi9cblxubGV0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xuXG4vLyDkuovku7ZcbmxldCB1bmljb20gPSBuZXcgRXZlbnRFbWl0dGVyKClcblxuLy8gdm3lrrnlmahcbmxldCB2bUhvb2tzID0gW10sIGV2SG9va3MgPSBbXVxuXG4vLyBncm91cCBOYW1lXG5sZXQgdW5pY29tR3JvdXBOYW1lID0gJydcblxuLy8g5YiG57uEXG5sZXQgZ3JvdXBGb3JWbSA9IHt9XG5cbi8vIOWRveWQjSDllK/kuIBcbmxldCBpZEZvclZtID0ge31cbmxldCB1bmljb21JZE5hbWUgPSAnJ1xuZnVuY3Rpb24gdXBkYXRlSWQodGhhdCwgbnYsIG92KXtcbiAgICBpZihudiA9PSBvdil7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZihvdil7XG4gICAgICAgIGRlbGV0ZSBpZEZvclZtW292XVxuICAgIH1cbiAgICBpZihudil7XG4gICAgICAgIGlkRm9yVm1bbnZdID0gdGhhdFxuICAgIH1cbn1cblxuLy8g6L2s5YyW5Li65LiA57u05pWw57uEXG5mdW5jdGlvbiB0b09uZUFycmF5KGRhdGEsIHRoYXQsIGFyciA9IFtdKXtcbiAgICBpZih0b1N0cmluZy5jYWxsKGRhdGEpLnRvTG93ZXJDYXNlKCkgPT0gJ1tvYmplY3QgYXJyYXldJyl7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGk8IGRhdGEubGVuZ3RoOyBpKz0xKXtcbiAgICAgICAgICAgIHRvT25lQXJyYXkoZGF0YVtpXSwgdGhhdCwgYXJyKVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYoZGF0YSl7XG4gICAgICAgIGxldCBrZXkgPSBTdHJpbmcoZGF0YSlcbiAgICAgICAgaWYodGhhdCl7XG4gICAgICAgICAgICBpZighZ3JvdXBGb3JWbVtrZXldKXtcbiAgICAgICAgICAgICAgICBncm91cEZvclZtW2tleV0gPSBbXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3JvdXBGb3JWbVtrZXldLnB1c2godGhhdClcbiAgICAgICAgfVxuICAgICAgICBhcnIucHVzaChrZXkpXG4gICAgfVxuICAgIHJldHVybiBhcnJcbn1cblxuLy8g5Lqk5o2iIHRoaXMg55SoXG5mdW5jdGlvbiBzZW5kU3dpdGNoKGZuLCB0aGF0KXtcbiAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgbGV0IGFyZyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgICAgbGV0IHRvID0gYXJnLnNoaWZ0KClcbiAgICAgICAgbGV0IGlzSWQgPSBhcmcuc2hpZnQoKVxuICAgICAgICAvLyAj55uu5qCH5LiN5a2Y5ZyoICBA5YiG57uE5LiN5a2Y5ZyoXG4gICAgICAgIGlmKCEhdG8gJiYgKChpc0lkICYmIHRoYXRbdW5pY29tSWROYW1lXSAhPSB0bykgfHwgKCFpc0lkICYmICghdGhhdFt1bmljb21Hcm91cE5hbWVdIHx8IHRoYXRbdW5pY29tR3JvdXBOYW1lXS5pbmRleE9mKHRvKSA8IDApKSkpe1xuICAgICAgICAgICAgLy8g55uu5qCH5LiN5a2Y5ZyoXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICAvLyDmiafooYxmblxuICAgICAgICBmbi5hcHBseSh0aGF0LCBhcmcpXG4gICAgfVxufVxuXG4vLyDlj5HpgIHlrrnlmahcbmZ1bmN0aW9uIHNlbmQoKSB7XG4gICAgbGV0IGFyZyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICBcbiAgICBsZXQgdG8gPSAnJywgaXNJZCA9IGZhbHNlXG4gICAgbGV0IGtleSA9IFN0cmluZyhhcmdbMF0pLnJlcGxhY2UoLyhbQCNdKShbXkAjXSopJC8sIGZ1bmN0aW9uKHMwLCBzMSwgczIpe1xuICAgICAgICB0byA9IHMyXG4gICAgICAgIGlzSWQgPSBzMSA9PSAnIydcbiAgICAgICAgcmV0dXJuICcnXG4gICAgfSlcbiAgICBhcmcuc3BsaWNlKDAsIDEsIGtleSwgdG8sIGlzSWQsIHRoaXMpXG4gICAgLy9jb25zb2xlLmxvZygnYXJnOicsIGFyZylcbiAgICB1bmljb20uZW1pdC5hcHBseSh1bmljb20sIGFyZylcbn1cblxuLy8g5a6J6KOF6YWN572uIOWQjeensFxuZnVuY3Rpb24gaW5zdGFsbCh2dWUsIHtcbiAgICBuYW1lID0gJ3VuaWNvbScsXG4gICAgc2VuZE5hbWUsXG4gICAgZ3JvdXBOYW1lLFxuICAgIGlkTmFtZVxufSA9IHt9KSB7XG4gICAgaWYoaW5zdGFsbC5pbnN0YWxsZWQpe1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgaW5zdGFsbC5pbnN0YWxsZWQgPSB0cnVlXG4gICAgXG4gICAgdnVlLnByb3RvdHlwZVsnJCcgKyAoc2VuZE5hbWUgfHwgKG5hbWUgKyAnU2VuZCcpKV0gPSBzZW5kXG5cbiAgICB1bmljb21Hcm91cE5hbWUgPSBncm91cE5hbWUgfHwgKG5hbWUgKyAnTmFtZScpXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodnVlLnByb3RvdHlwZSwgJyQnICsgKGdyb3VwTmFtZSB8fCAobmFtZSArICdWTScpKSwge1xuICAgICAgICBnZXQgKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdyb3VwRm9yVm1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgXG5cbiAgICB1bmljb21JZE5hbWUgPSBpZE5hbWUgfHwgKG5hbWUgKyAnSWQnKVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHZ1ZS5wcm90b3R5cGUsICckJyArIHVuaWNvbUlkTmFtZSwge1xuICAgICAgICBnZXQgKCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkRm9yVm1cbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICB2dWUubWl4aW4oe1xuICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgLy8g5ZG95ZCNXG4gICAgICAgICAgICBbdW5pY29tSWROYW1lXTp7XG4gICAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vIOWIm+W7uueahOaXtuWAme+8jOWKoOWFpeS6i+S7tuacuuWItlxuICAgICAgICBiZWZvcmVDcmVhdGUgKCkge1xuICAgICAgICAgICAgbGV0IG9wdCA9IHRoaXMuJG9wdGlvbnNcbiAgICAgICAgICAgIGxldCB1cyA9IG9wdFtuYW1lXVxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh1cylcbiAgICAgICAgICAgIGlmKHVzKXtcbiAgICAgICAgICAgICAgICBsZXQgdW5pID0ge31cbiAgICAgICAgICAgICAgICBmb3IobGV0IG4gaW4gdXMpe1xuICAgICAgICAgICAgICAgICAgICB1bmlbbl0gPSBbXVxuICAgICAgICAgICAgICAgICAgICBpZih0b1N0cmluZy5jYWxsKHVzW25dKS50b0xvd2VyQ2FzZSgpICE9ICdbb2JqZWN0IGFycmF5XScpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNbbl0gPSBbdXNbbl1dXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaTx1c1tuXS5sZW5ndGg7IGkrPTEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndXNbbl1baV0nLCB1c1tuXVtpXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHVzW25dW2ldKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeGZuID0gc2VuZFN3aXRjaCh1c1tuXVtpXSwgdGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlbbl0ucHVzaCh4Zm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pY29tLm9uKG4sIHhmbilcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBldkhvb2tzLnB1c2godW5pKVxuICAgICAgICAgICAgICAgIHZtSG9va3MucHVzaCh0aGlzKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDlkb3lkI3liIbnu4RcbiAgICAgICAgICAgIHRoaXNbdW5pY29tR3JvdXBOYW1lXSA9IHRvT25lQXJyYXkob3B0W3VuaWNvbUdyb3VwTmFtZV0sIHRoaXMpXG5cbiAgICAgICAgICAgIC8vIOWunuS+i+WRveWQjSDllK/kuIBcbiAgICAgICAgICAgIGxldCBpZCA9ICh0aGlzLiRvcHRpb25zLnByb3BzRGF0YSB8fCB7fSkudW5pY29tSWRcbiAgICAgICAgICAgIGlmKGlkKXtcbiAgICAgICAgICAgICAgICB1cGRhdGVJZCh0aGlzLCBpZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgd2F0Y2g6IHtcbiAgICAgICAgICAgIHVuaWNvbUlkIChudiwgb3YpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVJZCh0aGlzLCBudiwgb3YpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vIOWFqOWxgOa3t+WQiO+8jCDplIDmr4Hlrp7kvovnmoTml7blgJnvvIzplIDmr4Hkuovku7ZcbiAgICAgICAgZGVzdHJveWVkICgpIHtcbiAgICAgICAgICAgIC8vIOmUgOavge+8jCDplIDmr4EgaG9va3Mg5Lit55qE5YC8XG4gICAgICAgICAgICBsZXQgaW5kZXggPSB2bUhvb2tzLmluZGV4T2YodGhpcylcbiAgICAgICAgICAgIGlmKGluZGV4ID49IDApe1xuICAgICAgICAgICAgICAgIGxldCB1bmkgPSBldkhvb2tzW2luZGV4XVxuXG4gICAgICAgICAgICAgICAgLy8g56e76Zmk57yT5a2YXG4gICAgICAgICAgICAgICAgdm1Ib29rcy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICAgICAgZXZIb29rcy5zcGxpY2UoaW5kZXgsIDEpXG5cbiAgICAgICAgICAgICAgICAvLyDnp7vpmaTkuovku7ZcbiAgICAgICAgICAgICAgICBmb3IobGV0IG4gaW4gdW5pKXtcbiAgICAgICAgICAgICAgICAgICAgdW5pW25dLmZvckVhY2goZnVuY3Rpb24oZm4pe1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5pY29tLm9mZihuLCBmbilcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWIhue7hO+8jOS4gOWvueWkmu+8jCDljZXkuKp2beWPr+S7peWkmuS4quWIhue7hOWQjeensFxuICAgICAgICAgICAgdGhpc1t1bmljb21Hcm91cE5hbWVdLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZ3MgPSBncm91cEZvclZtW25hbWVdXG4gICAgICAgICAgICAgICAgaWYoZ3Mpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBncy5pbmRleE9mKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID4gLTEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3Muc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKGdzLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBncm91cEZvclZtW25hbWVdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAvLyDnp7vpmaTllK/kuIBJRFxuICAgICAgICAgICAgbGV0IGlkID0gdGhpcy51bmljb21JZFxuICAgICAgICAgICAgaWYoaWQpe1xuICAgICAgICAgICAgICAgIHVwZGF0ZUlkKHRoaXMsIHVuZGVmaW5lZCwgaWQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8g5L2/55SoIOWSjCB3YXRjaCDkuIDmoLfnmoTmt7flkIjmnLrliLZcbiAgICBsZXQgbWVyZ2UgPSB2dWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llc1xuICAgIG1lcmdlW25hbWVdID0gbWVyZ2Uud2F0Y2hcbiAgICAvLyBtZXJnZVt1bmljb21Hcm91cE5hbWVdID0gbWVyZ2UubWV0aG9kc1xuICAgIG1lcmdlW3VuaWNvbUdyb3VwTmFtZV0gPSBmdW5jdGlvbihwYXJlbnRWYWwsIGNoaWxkVmFsKXtcbiAgICAgICAgbGV0IHggPSBbXVxuICAgICAgICBpZihwYXJlbnRWYWwpe1xuICAgICAgICAgICAgeC5wdXNoKHBhcmVudFZhbClcbiAgICAgICAgfVxuICAgICAgICBpZihjaGlsZFZhbCl7XG4gICAgICAgICAgICB4LnB1c2goY2hpbGRWYWwpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHhcbiAgICB9XG59XG5cblxuaWYod2luZG93LlZ1ZSl7XG4gICAgaW5zdGFsbCh3aW5kb3cuVnVlKVxufVxuXG5yZXR1cm4ge0V2ZW50RW1pdHRlciwgaW5zdGFsbH1cblxufSkpKSJdfQ==
